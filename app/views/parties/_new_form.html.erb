<%= form_for(@party) do |f| %>
  <% if @party.errors.any? %>
    <div id="error_explanation">
      <h4><%= pluralize(@party.errors.count, "error") %> prohibited this party from being saved:</h4>
      <ul>
      <% @party.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div class="col-md-6">
    <div class="form-group">
      <%= f.label :name, "Party Title"%>
      <%= f.text_field :name, class: "form-control" %>
    </div>
    <div class="form-group">
      <label for="exampleInputName2">Friendly URL  </label>
      <input type="text" class="form-control" id="exampleInputName2">
    </div>
    <div class="form-group">
      <label for="exampleInputName3">Business Name </label>
      <input type="text" class="form-control" id="exampleInputName3">
    </div>
    
    <div class="form-group" id='venue-select'>
      <%= f.label :venue %><br>
      <%= select_tag 'party[venue_id]', options_from_collection_for_select(Venue.all, 'id', 'name_and_address'), include_blank: false, class: 'select2 form-control' %>
    </div>
    <div class="form-group">
      <%= check_box_tag "new_venue" %> Create New Venue
    </div>
    <div class='new_venue hidden' id='venue-create'>
      <%= f.fields_for :venue_attributes do |v| %>
        <div class="form-group">
          <%= v.label :name %>
          <%= v.text_field :name, class: "form-control" %>
        </div>
        <%= v.fields_for :address_attributes do |a| %>
          
          <div class="form-group">
            <%= a.label :street1, "Address street1" %><br>
            <%= a.text_field :street1, class: "form-control" %>
          </div>
          <div class="form-group">
            <%= a.label :street2, "Address street2" %><br>
            <%= a.text_field :street2, class: "form-control" %>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <%= a.label :city %>
                <%= a.text_field :city, class: "form-control" %>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <%= a.label :state %>
                <%= a.text_field :state, class: "form-control" %>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group">
                <%= a.label :zip, "Zip Code" %>
                <%= a.text_field :zip, class: "form-control"  %>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>

    
    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <%= f.label :scheduled_for, "Date" %>
          <%= f.datetime_select :scheduled_for, class: "form-control" %>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <%#= text_field_tag "ex1", nil, type: 'text',
          data: {'slider-id' => 'ex1Slider',
            'slider-min' => '0',
            'slider-max' => '50',
            'slider-step' => '1' }
            %>
          <div id="slider-range"></div>
          <span id="time"></span>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label for="exampleInputName9">Watch Party Picture</label>
          <button type="button" class="btn btn-green btn_full" data-toggle="modal" data-target="#myModal">
            Choose
          </button>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <%= image_tag "vendor/logo2.png", class: "img-responsive" %>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="form-group">
      <h5><strong>Number of People</strong></h5>
      <p>Choose a minimum and maximum of available RSVPs by 
        dragging the sliders (10-100)</p>
        <%#= text_field_tag "ex2", nil, type: 'text',
          data: {'slider-id' => 'ex1Slider',
            'slider-min' => '0',
            'slider-max' => '50',
            'slider-step' => '1' }
            %>
        <div class="text-center">
          <h2><strong>100 RSVPs</strong></h2>
        </div>
      </div>
      <div class="form-group">
        <%= f.label :team, "Party Team" %><br>
        <%= select_tag 'party[team_id]', options_from_collection_for_select(Team.all, 'id', 'name'), include_blank: false, class: 'select2 form-control' %>
      </div>

      <div class="form-group">
        <%= f.label :description, "Watch Party Description" %>
        <%= f.text_area :description, rows: 3, class: "form-control" %>
      </div>
      <div class="form-group">
        <%= f.hidden_field :organizer_id, value: current_user.id %>
      </div>
      <div class="form-group">
        <label for="exampleInputName12">Tags  </label>
        <input type="text" class="form-control" id="exampleInputName12">
      </div>
      <div class="form-group">
        <h6><label for="exampleInputName13">Party Type  </label></h6>
        <label class="radio-inline">
          <input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">  Open Invite
        </label>
        <label class="radio-inline">
          <input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">Invite Only
        </label>
      </div>
    </div>
    <div class="text-center col-md-12 btn_area">
      <%= link_to 'Cancle', parties_path, class: "btn btn-green btn-default" %>
      <%= f.submit "Save", class: "btn btn-green btn-default" %>
    </div>
<% end %>
 <script type="text/javascript">
      $("#slider-range").slider({
        range: true,
        min: 0,
        max: 1439,
        values: [540, 1020],
        slide: slideTime
      });
      function slideTime(event, ui){
        var val0 = $("#slider-range").slider("values", 0),
          val1 = $("#slider-range").slider("values", 1),
          minutes0 = parseInt(val0 % 60, 10),
          hours0 = parseInt(val0 / 60 % 24, 10),
          minutes1 = parseInt(val1 % 60, 10),
          hours1 = parseInt(val1 / 60 % 24, 10);
          
        startTime = getTime(hours0, minutes0);
        endTime = getTime(hours1, minutes1);
        $("#time").text(startTime + ' - ' + endTime);
      }
      function getTime(hours, minutes) {
        var time = null;
        minutes = minutes + "";
        if (hours < 12) {
          time = "AM";
        }
        else {
          time = "PM";
        }
        if (hours == 0) {
          hours = 12;
        }
        if (hours > 12) {
          hours = hours - 12;
        }
        if (minutes.length == 1) {
          minutes = "0" + minutes;
        }
        return hours + ":" + minutes + " " + time;
      }
      slideTime();
    </script>
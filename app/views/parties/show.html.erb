<div class='container'>
  <p id="notice"><%= notice %></p>
  <div class="row">
    <div class="col-md-13 cols">
      <span class="logo-name col-md-7 cols">
        <%= image_tag(@party.team.image_url, size: '75') unless @party.team.image_url.blank? %>
        <%= @party.name%>
        Created By <%= @party.organizer.full_name %> (<%= @party.organizer.username %>)
      </span>
      <span class= "rsvp-invite" >
        <%= link_to "RSVP", party_rsvp_path(@party), class: reservations_include?(@party, current_user) ? "rsvp-button btn" : "rsvp-available-button btn" %>
        <%= link_to "Invite Friends", invite_friends_path(@party), class: "invite-friends-button btn"%>
      </span>
    </div>
    <div style="clear:both;"></div>
    <div class="col-md-13 cols" style="margin-top: 20px;">
      <div id="details" class="col-md-3">
        <h3>Details</h3>
        <p>
          When?<br/>
          <%= @party.scheduled_for.to_formatted_s(:long) %>
        </p>
        <p>
          Where?<br/>
          <%= @party.venue.name %><br/>
          <%= @party.venue.address.street_address %><br/>
          <%= @party.venue.address.city_state %>
        </p>
        <p>
          <%= @party.party_reservations.count.to_s%> RSVP'd
        </p>
        <% if @party.venue.address.latitude.present? && @party.venue.address.longitude.present?%>
          <div id="map" style='width: 100%; height: 200px;'></div>
        <% end %>
      </div>
      <div id="available-packages" class="col-md-8">
        <%= render :partial => "available_packages" %>
      </div>
      <div style="clear:both;"></div>
    </div>
  </div>
</div>

<script type="text/javascript">
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers(<%=raw @map_markers.to_json %>);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
    handler.getMap().setZoom(11)
  });
</script>
